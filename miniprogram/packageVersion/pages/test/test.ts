import { getCloundKeyPointsAngle } from "../../core/angle/cloundAngleCompute"
import { getPlansByValues } from "../../core/plan/estimatePlan"

Page({

    /**
     * 页面的初始数据
     */
    data: {

    },

    /**
     * 生命周期函数--监听页面加载
     */
    onLoad() {
        const points = [
            {
                "image_url": "https://cos.painspective.com/jizhi/miniProgram/public/photo/20240519-190144.png",
                "landmarks": [
                    {
                        "x": 286.46725103259087,
                        "y": 145.44162517786026,
                        "z": -95.28759875893593,
                        "visibility": 0.999919056892395
                    },
                    {
                        "x": 296.9926479756832,
                        "y": 130.23312085866928,
                        "z": -122.00746098160744,
                        "visibility": 0.9999221563339233
                    },
                    {
                        "x": 299.99813336133957,
                        "y": 129.76631394028664,
                        "z": -122.00114491581917,
                        "visibility": 0.9999215602874756
                    },
                    {
                        "x": 303.50171676278114,
                        "y": 129.27430567145348,
                        "z": -122.0245216190815,
                        "visibility": 0.999947190284729
                    },
                    {
                        "x": 295.12686762213707,
                        "y": 129.95772306621075,
                        "z": -71.55850258469582,
                        "visibility": 0.9999027252197266
                    },
                    {
                        "x": 296.791967689991,
                        "y": 129.18627908825874,
                        "z": -71.55862509459257,
                        "visibility": 0.9998579025268555
                    },
                    {
                        "x": 298.8058851957321,
                        "y": 128.22979164123535,
                        "z": -71.6754586994648,
                        "visibility": 0.9998934268951416
                    },
                    {
                        "x": 330.7264468073845,
                        "y": 138.24791038036346,
                        "z": -190.66614523530006,
                        "visibility": 0.9999374151229858
                    },
                    {
                        "x": 325.0033652186394,
                        "y": 136.7752940505743,
                        "z": 29.687879998236895,
                        "visibility": 0.9998717308044434
                    },
                    {
                        "x": 295.5590280890465,
                        "y": 162.4674057662487,
                        "z": -118.56976068019867,
                        "visibility": 0.9998811483383179
                    },
                    {
                        "x": 292.43856489658356,
                        "y": 161.88110026717186,
                        "z": -54.310992144048214,
                        "visibility": 0.9997829794883728
                    },
                    {
                        "x": 366.2123912572861,
                        "y": 229.87617272138596,
                        "z": -326.23223930597305,
                        "visibility": 0.9999526739120483
                    },
                    {
                        "x": 331.35994094610214,
                        "y": 238.8093745112419,
                        "z": 190.02491936087608,
                        "visibility": 0.9983965754508972
                    },
                    {
                        "x": 375.13971465826035,
                        "y": 369.99245089292526,
                        "z": -402.3523026108742,
                        "visibility": 0.9967928528785706
                    },
                    {
                        "x": 334.4526352286339,
                        "y": 364.0432932674885,
                        "z": 227.37490180134773,
                        "visibility": 0.07781630009412766
                    },
                    {
                        "x": 347.9917756319046,
                        "y": 495.96343195438385,
                        "z": -385.31700199842453,
                        "visibility": 0.9944807291030884
                    },
                    {
                        "x": 304.86114102602005,
                        "y": 478.60813361406326,
                        "z": 143.1314431875944,
                        "visibility": 0.11096315830945969
                    },
                    {
                        "x": 348.0279659628868,
                        "y": 532.5909939408302,
                        "z": -440.3801731467247,
                        "visibility": 0.985823392868042
                    },
                    {
                        "x": 292.40375393629074,
                        "y": 506.66158336400986,
                        "z": 141.5761301368475,
                        "visibility": 0.09873639047145844
                    },
                    {
                        "x": 331.65113335847855,
                        "y": 531.2484104037285,
                        "z": -433.18548452854156,
                        "visibility": 0.9852887988090515
                    },
                    {
                        "x": 291.7652505040169,
                        "y": 509.1069931983948,
                        "z": 95.42960134148598,
                        "visibility": 0.10120707750320435
                    },
                    {
                        "x": 329.1355605125427,
                        "y": 518.8708657026291,
                        "z": -380.1293703317642,
                        "visibility": 0.9766649007797241
                    },
                    {
                        "x": 295.179447054863,
                        "y": 501.60022109746933,
                        "z": 120.80995850265026,
                        "visibility": 0.11000943183898926
                    },
                    {
                        "x": 339.7314868569374,
                        "y": 470.7823660969734,
                        "z": -159.41102108359337,
                        "visibility": 0.9979081153869629
                    },
                    {
                        "x": 315.1751675605774,
                        "y": 466.55438232421875,
                        "z": 159.4821312725544,
                        "visibility": 0.9987096786499023
                    },
                    {
                        "x": 166.35713258385658,
                        "y": 500.49948501586914,
                        "z": -161.0331791639328,
                        "visibility": 0.9145809412002563
                    },
                    {
                        "x": 247.90416651964188,
                        "y": 596.7627531290054,
                        "z": 119.13793435692787,
                        "visibility": 0.7778409123420715
                    },
                    {
                        "x": 177.48801881074905,
                        "y": 683.0083775520325,
                        "z": 16.56649834290147,
                        "visibility": 0.8661261796951294
                    },
                    {
                        "x": 300.9044888019562,
                        "y": 767.4174624681473,
                        "z": 213.00006240606308,
                        "visibility": 0.7055688500404358
                    },
                    {
                        "x": 199.69917199015617,
                        "y": 708.1925787329674,
                        "z": 33.28401508927345,
                        "visibility": 0.8928505778312683
                    },
                    {
                        "x": 326.99757224321365,
                        "y": 792.4311685562134,
                        "z": 218.73515903949738,
                        "visibility": 0.7790083885192871
                    },
                    {
                        "x": 112.56129455566406,
                        "y": 733.2593477964401,
                        "z": 20.348240464925766,
                        "visibility": 0.8377469182014465
                    },
                    {
                        "x": 243.65287345647812,
                        "y": 820.4193465709686,
                        "z": 176.8492068350315,
                        "visibility": 0.6200599670410156
                    }
                ]
            },
            {
                "image_url": "https://cos.painspective.com/jizhi/miniProgram/public/photo/20240519-190151.png",
                "landmarks": [
                    {
                        "x": 282.6716950535774,
                        "y": 189.21132351458073,
                        "z": -131.59827023744583,
                        "visibility": 0.9998582601547241
                    },
                    {
                        "x": 293.8390561938286,
                        "y": 172.8342342376709,
                        "z": -159.69764918088913,
                        "visibility": 0.9997952580451965
                    },
                    {
                        "x": 296.33947134017944,
                        "y": 172.8548632413149,
                        "z": -159.77678418159485,
                        "visibility": 0.9998084902763367
                    },
                    {
                        "x": 299.0928712487221,
                        "y": 172.7584876716137,
                        "z": -159.86717224121094,
                        "visibility": 0.999869704246521
                    },
                    {
                        "x": 293.35213869810104,
                        "y": 172.19465199112892,
                        "z": -113.26575562357903,
                        "visibility": 0.9997625946998596
                    },
                    {
                        "x": 295.4617327451706,
                        "y": 171.75014862418175,
                        "z": -113.24442207813263,
                        "visibility": 0.9996992349624634
                    },
                    {
                        "x": 297.8181850910187,
                        "y": 171.07308501005173,
                        "z": -113.3644425868988,
                        "visibility": 0.9997352957725525
                    },
                    {
                        "x": 325.12417793273926,
                        "y": 181.3757581114769,
                        "z": -239.07339990139008,
                        "visibility": 0.9998990297317505
                    },
                    {
                        "x": 322.5356835126877,
                        "y": 179.58004906773567,
                        "z": -34.327231235802174,
                        "visibility": 0.9997473359107971
                    },
                    {
                        "x": 289.4597256183624,
                        "y": 206.55801159143448,
                        "z": -158.63251715898514,
                        "visibility": 0.9998395442962646
                    },
                    {
                        "x": 287.74744272232056,
                        "y": 206.25027483701706,
                        "z": -98.91017019748688,
                        "visibility": 0.9997395873069763
                    },
                    {
                        "x": 357.98180103302,
                        "y": 284.69333788752556,
                        "z": -361.13792955875397,
                        "visibility": 0.999980092048645
                    },
                    {
                        "x": 335.226588845253,
                        "y": 286.5496631860733,
                        "z": 116.2340635061264,
                        "visibility": 0.9979141354560852
                    },
                    {
                        "x": 366.1888986825943,
                        "y": 435.42085725069046,
                        "z": -392.5033861398697,
                        "visibility": 0.9976968169212341
                    },
                    {
                        "x": 335.5748337507248,
                        "y": 414.39841800928116,
                        "z": 161.2380638718605,
                        "visibility": 0.08913474529981613
                    },
                    {
                        "x": 348.5790067911148,
                        "y": 566.5468327403069,
                        "z": -349.7345995903015,
                        "visibility": 0.9970115423202515
                    },
                    {
                        "x": 320.1341825723648,
                        "y": 527.0132058858871,
                        "z": 104.36235904693604,
                        "visibility": 0.14403636753559113
                    },
                    {
                        "x": 353.85987281799316,
                        "y": 605.5707319974899,
                        "z": -401.10123217105865,
                        "visibility": 0.9927443265914917
                    },
                    {
                        "x": 326.6611385345459,
                        "y": 558.6538932919502,
                        "z": 103.4330727159977,
                        "visibility": 0.1320154368877411
                    },
                    {
                        "x": 338.8115334510803,
                        "y": 606.3037326335907,
                        "z": -401.2433224916458,
                        "visibility": 0.9924773573875427
                    },
                    {
                        "x": 328.10073018074036,
                        "y": 558.1633101701736,
                        "z": 61.50197096168995,
                        "visibility": 0.13455535471439362
                    },
                    {
                        "x": 335.10078728199005,
                        "y": 594.1207680106163,
                        "z": -346.5153521299362,
                        "visibility": 0.9875603318214417
                    },
                    {
                        "x": 316.71099841594696,
                        "y": 548.3813858032227,
                        "z": 85.0359757244587,
                        "visibility": 0.14262424409389496
                    },
                    {
                        "x": 338.6466097831726,
                        "y": 534.056045114994,
                        "z": -141.95953786373138,
                        "visibility": 0.9996092915534973
                    },
                    {
                        "x": 319.95238840579987,
                        "y": 519.4839639663696,
                        "z": 141.9641736149788,
                        "visibility": 0.9996297359466553
                    },
                    {
                        "x": 249.19068157672882,
                        "y": 640.465552687645,
                        "z": -91.87884449958801,
                        "visibility": 0.9752801656723022
                    },
                    {
                        "x": 167.4369177222252,
                        "y": 509.3086040019989,
                        "z": 105.94606801867485,
                        "visibility": 0.6867311596870422
                    },
                    {
                        "x": 288.9947506785393,
                        "y": 763.5165024399757,
                        "z": 161.85836374759674,
                        "visibility": 0.8821884393692017
                    },
                    {
                        "x": 165.98538219928741,
                        "y": 679.1502194404602,
                        "z": 236.34530574083328,
                        "visibility": 0.4439848065376282
                    },
                    {
                        "x": 312.20512092113495,
                        "y": 780.9999215006828,
                        "z": 187.6588100194931,
                        "visibility": 0.8579950928688049
                    },
                    {
                        "x": 192.0340320467949,
                        "y": 714.5587581396103,
                        "z": 246.69981062412262,
                        "visibility": 0.5543134808540344
                    },
                    {
                        "x": 238.4878408908844,
                        "y": 807.5392475128174,
                        "z": 175.3770688176155,
                        "visibility": 0.8096100091934204
                    },
                    {
                        "x": 91.9608336687088,
                        "y": 714.7826962471008,
                        "z": 230.9577265381813,
                        "visibility": 0.43064215779304504
                    }
                ]
            },
            {
                "image_url": "https://cos.painspective.com/jizhi/miniProgram/public/photo/20240519-190409.png",
                "landmarks": [
                    {
                        "x": 331.0913532972336,
                        "y": 296.6486115157604,
                        "z": -86.60429581999779,
                        "visibility": 0.9979750514030457
                    },
                    {
                        "x": 347.07924127578735,
                        "y": 281.11821398139,
                        "z": -93.05311664938927,
                        "visibility": 0.9974226951599121
                    },
                    {
                        "x": 350.5807423591614,
                        "y": 281.41205555200577,
                        "z": -93.11868071556091,
                        "visibility": 0.9967710375785828
                    },
                    {
                        "x": 354.3969291448593,
                        "y": 281.89527541399,
                        "z": -93.08905735611916,
                        "visibility": 0.9968487620353699
                    },
                    {
                        "x": 343.3646774291992,
                        "y": 280.18982568383217,
                        "z": -58.35701823234558,
                        "visibility": 0.9983347058296204
                    },
                    {
                        "x": 344.44889783859253,
                        "y": 279.87933364510536,
                        "z": -58.38881403207779,
                        "visibility": 0.9976277947425842
                    },
                    {
                        "x": 345.9101229906082,
                        "y": 279.7146579027176,
                        "z": -58.516365364193916,
                        "visibility": 0.9979556798934937
                    },
                    {
                        "x": 372.33386874198914,
                        "y": 292.9654852151871,
                        "z": -88.27213004231453,
                        "visibility": 0.9967997074127197
                    },
                    {
                        "x": 363.70071828365326,
                        "y": 289.1320296525955,
                        "z": 63.22344809770584,
                        "visibility": 0.9985179305076599
                    },
                    {
                        "x": 336.79525434970856,
                        "y": 314.43508809804916,
                        "z": -80.11249884963036,
                        "visibility": 0.9930304884910583
                    },
                    {
                        "x": 333.4291535615921,
                        "y": 312.8590179681778,
                        "z": -36.17843668907881,
                        "visibility": 0.9948829412460327
                    },
                    {
                        "x": 368.1557297706604,
                        "y": 356.1840822994709,
                        "z": -229.9689480662346,
                        "visibility": 0.9978012442588806
                    },
                    {
                        "x": 377.0467734336853,
                        "y": 366.67147821187973,
                        "z": 210.64095586538315,
                        "visibility": 0.9973402619361877
                    },
                    {
                        "x": 263.95709455013275,
                        "y": 278.6457026004791,
                        "z": -388.3102309703827,
                        "visibility": 0.9980025887489319
                    },
                    {
                        "x": 354.517240524292,
                        "y": 449.7054387331009,
                        "z": 276.9195821881294,
                        "visibility": 0.1620754897594452
                    },
                    {
                        "x": 182.38048911094666,
                        "y": 182.4951992481947,
                        "z": -335.69783568382263,
                        "visibility": 0.9915135502815247
                    },
                    {
                        "x": 334.38193678855896,
                        "y": 542.017201602459,
                        "z": 199.36526358127594,
                        "visibility": 0.14414426684379578
                    },
                    {
                        "x": 159.2337468266487,
                        "y": 157.67084769904613,
                        "z": -386.6283440589905,
                        "visibility": 0.9770544171333313
                    },
                    {
                        "x": 325.7969981431961,
                        "y": 558.3285322189331,
                        "z": 210.56040287017822,
                        "visibility": 0.16500143706798553
                    },
                    {
                        "x": 162.07155376672745,
                        "y": 150.38004475831985,
                        "z": -341.6951525211334,
                        "visibility": 0.9753381013870239
                    },
                    {
                        "x": 324.1159111261368,
                        "y": 556.8169737458229,
                        "z": 155.51067501306534,
                        "visibility": 0.1648719757795334
                    },
                    {
                        "x": 170.2969217300415,
                        "y": 158.96023762226105,
                        "z": -321.04526221752167,
                        "visibility": 0.9731261134147644
                    },
                    {
                        "x": 327.3128342628479,
                        "y": 558.6719451546669,
                        "z": 174.95247036218643,
                        "visibility": 0.17964981496334076
                    },
                    {
                        "x": 360.0824326276779,
                        "y": 619.0005102753639,
                        "z": -134.85843047499657,
                        "visibility": 0.9941449761390686
                    },
                    {
                        "x": 365.073082447052,
                        "y": 617.0581773519516,
                        "z": 134.5775493979454,
                        "visibility": 0.9876826405525208
                    },
                    {
                        "x": 368.3124363422394,
                        "y": 796.7197210788727,
                        "z": -90.140001475811,
                        "visibility": 0.29301536083221436
                    },
                    {
                        "x": 365.1282751560211,
                        "y": 783.4752594232559,
                        "z": 160.88674664497375,
                        "visibility": 0.06344950199127197
                    },
                    {
                        "x": 366.8963325023651,
                        "y": 967.7513343095779,
                        "z": 14.891026057302952,
                        "visibility": 0.08765775710344315
                    },
                    {
                        "x": 360.38704693317413,
                        "y": 949.0763022899628,
                        "z": 275.0475749373436,
                        "visibility": 0.013623462058603764
                    },
                    {
                        "x": 382.1600979566574,
                        "y": 993.8931868076324,
                        "z": 20.00213723629713,
                        "visibility": 0.33739468455314636
                    },
                    {
                        "x": 374.3254965543747,
                        "y": 972.8424346446991,
                        "z": 283.56481343507767,
                        "visibility": 0.071919284760952
                    },
                    {
                        "x": 322.44045972824097,
                        "y": 1003.5558738708496,
                        "z": -92.11085930466652,
                        "visibility": 0.09192923456430435
                    },
                    {
                        "x": 316.32657647132874,
                        "y": 979.1666672229767,
                        "z": 183.2391756772995,
                        "visibility": 0.025179872289299965
                    }
                ]
            },
            {
                "image_url": "https://cos.painspective.com/jizhi/miniProgram/public/photo/20240519-190414.png",
                "landmarks": [
                    {
                        "x": 331.62313759326935,
                        "y": 289.7890224456787,
                        "z": -204.50243949890137,
                        "visibility": 0.9998639822006226
                    },
                    {
                        "x": 346.29123628139496,
                        "y": 276.4140885770321,
                        "z": -216.59807801246643,
                        "visibility": 0.9998785257339478
                    },
                    {
                        "x": 349.9027955532074,
                        "y": 277.4526882469654,
                        "z": -216.64301753044128,
                        "visibility": 0.9998593330383301
                    },
                    {
                        "x": 353.91670167446136,
                        "y": 278.53131079673767,
                        "z": -216.79390668869019,
                        "visibility": 0.9998946189880371
                    },
                    {
                        "x": 342.432764172554,
                        "y": 274.30639109015465,
                        "z": -178.82801294326782,
                        "visibility": 0.9996669292449951
                    },
                    {
                        "x": 343.3643138408661,
                        "y": 273.7348358631134,
                        "z": -178.90918403863907,
                        "visibility": 0.9994779229164124
                    },
                    {
                        "x": 344.5089626312256,
                        "y": 273.1789335012436,
                        "z": -178.92101883888245,
                        "visibility": 0.9995713829994202
                    },
                    {
                        "x": 375.6305605173111,
                        "y": 291.8697846531868,
                        "z": -231.6150215268135,
                        "visibility": 0.9999167919158936
                    },
                    {
                        "x": 365.46397626399994,
                        "y": 284.34859481453896,
                        "z": -68.5336284339428,
                        "visibility": 0.9996647834777832
                    },
                    {
                        "x": 338.95042419433594,
                        "y": 308.23928502202034,
                        "z": -208.4023243188858,
                        "visibility": 0.9998862743377686
                    },
                    {
                        "x": 333.7961596250534,
                        "y": 305.2801096737385,
                        "z": -161.65846288204193,
                        "visibility": 0.9997233748435974
                    },
                    {
                        "x": 394.29540395736694,
                        "y": 387.4642312526703,
                        "z": -338.2177209854126,
                        "visibility": 0.9999465942382812
                    },
                    {
                        "x": 355.8818966150284,
                        "y": 355.1452213525772,
                        "z": 79.37883213162422,
                        "visibility": 0.9993643164634705
                    },
                    {
                        "x": 380.1638889312744,
                        "y": 523.4742807149887,
                        "z": -408.4347724914551,
                        "visibility": 0.9979617595672607
                    },
                    {
                        "x": 286.69272750616074,
                        "y": 273.7271400690079,
                        "z": 128.09141531586647,
                        "visibility": 0.9751400351524353
                    },
                    {
                        "x": 351.01842999458313,
                        "y": 644.9076410531998,
                        "z": -388.01477909088135,
                        "visibility": 0.9934606552124023
                    },
                    {
                        "x": 235.67097663879395,
                        "y": 184.68029409646988,
                        "z": 136.1359253525734,
                        "visibility": 0.9917073845863342
                    },
                    {
                        "x": 354.6695113182068,
                        "y": 679.9718642234802,
                        "z": -425.69943726062775,
                        "visibility": 0.9820913672447205
                    },
                    {
                        "x": 221.2331748008728,
                        "y": 161.9734973013401,
                        "z": 129.20835867524147,
                        "visibility": 0.975444495677948
                    },
                    {
                        "x": 344.4798755645752,
                        "y": 680.8884238004684,
                        "z": -437.6556760072708,
                        "visibility": 0.9814563989639282
                    },
                    {
                        "x": 221.05657994747162,
                        "y": 157.85776761174202,
                        "z": 118.85755330324173,
                        "visibility": 0.9725174903869629
                    },
                    {
                        "x": 341.5095406770706,
                        "y": 669.0142885446548,
                        "z": -390.80291986465454,
                        "visibility": 0.977923572063446
                    },
                    {
                        "x": 227.75834918022156,
                        "y": 166.3071319758892,
                        "z": 123.5883192718029,
                        "visibility": 0.9754814505577087
                    },
                    {
                        "x": 363.1295573711395,
                        "y": 605.2555369734764,
                        "z": -136.51305735111237,
                        "visibility": 0.9978002905845642
                    },
                    {
                        "x": 354.77884232997894,
                        "y": 597.454994559288,
                        "z": 136.32875442504883,
                        "visibility": 0.998528003692627
                    },
                    {
                        "x": 369.78736877441406,
                        "y": 780.8480008244514,
                        "z": -97.06503212451935,
                        "visibility": 0.5122471451759338
                    },
                    {
                        "x": 365.69070994853973,
                        "y": 767.1032650470734,
                        "z": 140.97404077649117,
                        "visibility": 0.22028838098049164
                    },
                    {
                        "x": 380.0723373889923,
                        "y": 923.6280213594437,
                        "z": 18.218721691519022,
                        "visibility": 0.27191662788391113
                    },
                    {
                        "x": 375.82308053970337,
                        "y": 912.825976729393,
                        "z": 235.7611647248268,
                        "visibility": 0.08518955856561661
                    },
                    {
                        "x": 390.9522819519043,
                        "y": 953.1526029109955,
                        "z": 25.022489950060844,
                        "visibility": 0.5959728956222534
                    },
                    {
                        "x": 387.3741000890732,
                        "y": 938.0354030132294,
                        "z": 239.0222430229187,
                        "visibility": 0.12859366834163666
                    },
                    {
                        "x": 332.3146826028824,
                        "y": 966.4610061645508,
                        "z": -76.43725708127022,
                        "visibility": 0.2263599932193756
                    },
                    {
                        "x": 326.9976395368576,
                        "y": 944.6549260616302,
                        "z": 136.08979508280754,
                        "visibility": 0.0780758485198021
                    }
                ]
            }
        ]
        const selectPlans = ["1", "2", "3", "4", "5", "6", "7", "8"]
        const plans = getPlansByValues(selectPlans)
        console.log(plans);
        const value1 = getCloundKeyPointsAngle(points[0], plans[4], "left")
        const value2 = getCloundKeyPointsAngle(points[1], plans[4], "right")
        const value3=getCloundKeyPointsAngle(points[2], plans[5], "left")
        const value4 = getCloundKeyPointsAngle(points[3], plans[5], "right")
        console.log(value1,value2,value3,value4);
    },

    /**
     * 生命周期函数--监听页面初次渲染完成
     */
    onReady() {

    },

    /**
     * 生命周期函数--监听页面显示
     */
    onShow() {

    },

    /**
     * 生命周期函数--监听页面隐藏
     */
    onHide() {

    },

    /**
     * 生命周期函数--监听页面卸载
     */
    onUnload() {

    },

    /**
     * 页面相关事件处理函数--监听用户下拉动作
     */
    onPullDownRefresh() {

    },

    /**
     * 页面上拉触底事件的处理函数
     */
    onReachBottom() {

    }
})